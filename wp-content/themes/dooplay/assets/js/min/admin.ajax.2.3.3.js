!function(h){var a={};Doc=h(document),Ajx=dooAj.url,h(function(){a.SimpleClicks(),a.LicenseApiRest(),a.FeaturedTitles(),a.UploadBackdrop(),a.AdTabsManage(),a.SaveAdOptions(),a.LinkPost(),a.LinkDelete(),a.LinkEditor(),a.LinkReload(),a.LinkSave(),a.UpdateOptions(),a.UpdateDatabase(),a.DatabaseTool()}),a.SimpleClicks=function(){Doc.on("click",".requestscontrol",function(){var a=h(this).data("post");h("#request_post_"+a).html(dooAj.loading)}),Doc.on("click","#doolinks_response > tr",function(){h(this).toggleClass("active")}),Doc.on("click","#dooplay_anchor_showform",function(){return h(".dform").fadeIn(500),h(".dpre").hide(),!1}),Doc.on("click","#dooplay_anchor_hideform",function(){return h(".dpre").fadeIn(500),h(".dform").hide(),!1}),Doc.on("click","#doolinkeditor_cancel",function(){var a=h(this).data("id");return h(".managelinks").show(),h("#dooeditorlink-"+a).remove(),!1}),Doc.on("click",".doo-nav-tab",function(){var a=h(this).attr("data-tab");return h(".doo-nav-tab").removeClass("nav-tab-active"),h(".dt_boxg").removeClass("current"),h(this).addClass("nav-tab-active"),h("#"+a).addClass("current"),!1}),Doc.on("submit","#post",function(){h("#dooplay_lfield_urls").val()&&!0==confirm(dooAj.confirmpublink)&&h("#dooplay_anchor_postlinks").trigger("click")})},a.LicenseApiRest=function(){Doc.on("click","#api_doothemes",function(){h(".apivalue").html(dooAj.loading);var e=dooAj.doothemes_server;return b=dooAj.doothemes_item,c=dooAj.doothemes_license,d=dooAj.domain,h.getJSON(e+"/?edd_action=check_license&license="+c+"&domain="+window.location.hostname,function(a){h.each(a,function(a,e){h("#"+a).html(e),"license"==a&&("valid"==e?h("#license").html("<span class=\"valid_dt_key_info\">ON</span> <code>"+c+"</code>"):h("#license").html("<span class=\"invalid_dt_key_info\">OFF</span> <code>"+c+"</code>"))})}),!1})},a.FeaturedTitles=function(){Doc.on("click",".add-to-featured",function(){var a=h(this).data("postid");return nonce=h(this).data("nonce"),h("#feature-add-"+a).html(dooAj.loading),h.ajax({url:Ajx,type:"post",data:{postid:a,nonce:nonce,action:"dt_add_featured"},error:function(a){console.log(a)},success:function(){h("#feature-add-"+a).html(dooAj.add_featu),h("#feature-add-"+a).hide(),h("#feature-del-"+a).show()}}),!1}),Doc.on("click",".del-of-featured",function(){var a=h(this).data("postid"),e=h(this).data("nonce");return h("#feature-del-"+a).html(dooAj.loading),h.ajax({url:Ajx,type:"post",data:{postid:a,nonce:e,action:"dt_remove_featured"},error:function(a){console.log(a)},success:function(){h("#feature-del-"+a).html(dooAj.rem_featu),h("#feature-add-"+a).show(),h("#feature-del-"+a).hide()}}),!1})},a.UploadBackdrop=function(){Doc.on("click",".import-upload-image",function(){var a=h(this).data("prelink");return nonce=h(this).data("nonce"),field=h(this).data("field"),postid=h(this).data("postid"),image=h("#"+field).get(0).value,urlimage=a+image,image&&(h(".import-upload-image").hide(),h("#"+field).val(dooAj.loading),h("#"+field).prop("disabled",!0),h.ajax({url:Ajx,type:"post",data:{url:urlimage,nonce:nonce,field:field,postid:postid,action:"dt_upload_ajax_image"},error:function(a){console.log(a)},success:function(a){h("#"+field).prop("disabled",!1),h("#"+field).val(a)}})),!1})},a.AdTabsManage=function(){1<h("#dooadmenu > li.nav-tab").length&&Doc.on("click","#dooadmenu > li.nav-tab",function(){var a=h(this).data("tab");return!1!=a&&(h("#dooadmenu > li.nav-tab").removeClass("nav-tab-active"),h(".tab-content").removeClass("on"),h(this).addClass("nav-tab-active"),h("#dooad-"+a).addClass("on")),!1})},a.SaveAdOptions=function(){Doc.on("submit","#dooadmanage",function(){return that=h(this),text=h("#dooadsavebutton").data("text"),h("#dooadsavebutton").prop("disabled",!0),h("#dooadsavebutton").val(dooAj.loading),h("#ad-manage-codes").addClass("hidden"),h.ajax({url:Ajx,type:"post",dataType:"json",data:that.serialize(),error:function(a){console.log(a)},success:function(){h("#ad-manage-codes").removeClass("hidden"),h("#dooadsavebutton").prop("disabled",!1),h("#dooadsavebutton").val(text)}}),!1})},a.LinkPost=function(){Doc.on("click","#dooplay_anchor_postlinks",function(){return h("#dooplay_lfield_urls").val()?(h("#doolinks_response").addClass("onload"),h("#publish").hide(),h.ajax({url:Ajx,type:"post",data:{urls:h("#dooplay_lfield_urls").val(),type:h("#dooplay_lfield_type").val(),quality:h("#dooplay_lfield_qual").val(),language:h("#dooplay_lfield_lang").val(),size:h("#dooplay_lfield_size").val(),postid:h("#post_ID").val(),action:"doosave_links"},error:function(a){console.log(a)},success:function(a){h("#publish").show(),h("#doolinks_response").removeClass("onload"),h("#doolinks_response").html(a),h("#dooplay_lfield_urls").val(""),h("#dooplay_lfield_size").val("")}})):alert(dooAj.nolink),!1})},a.LinkDelete=function(){Doc.on("click",".doodelete_links",function(){var a=h(this).data("id");return answer=confirm(dooAj.deletelink),answer&&h.ajax({url:Ajx,type:"post",data:{id:a,action:"doodelt_links"},error:function(a){console.log(a)},success:function(){h("#link-"+a).remove(),h("#dooeditorlink-"+a).remove()}}),!1})},a.LinkEditor=function(){Doc.on("click",".dooedit_links",function(){var a=h(this).data("id");return h(".doo_link_editor").remove(),h(".managelinks").show(),h("#link-"+a).addClass("onload"),h("#link-"+a).removeClass("fadein"),h("#link-"+a+" > td > .managelinks").hide(),h.ajax({url:Ajx,type:"post",data:{id:a,action:"dooformeditor_links"},error:function(a){console.log(a)},success:function(e){h("#link-"+a).removeClass("onload"),h("#link-"+a).after(e),h("#doolinkeditor_url").focus(),h("#link-"+a+" > .managelinks").hide()}}),!1})},a.LinkReload=function(){Doc.on("click","#dooplay_anchor_reloadllist",function(){var a=h(this).data("id");return h("#doolinks_response").addClass("onload"),h.ajax({url:Ajx,type:"post",data:{id:a,action:"dooreload_links"},error:function(a){console.log(a)},success:function(a){h("#doolinks_response").removeClass("onload"),h("#doolinks_response").html(a)}}),!1})},a.LinkSave=function(){Doc.on("click","#doolinkeditor_save",function(){var a=h(this).data("id");return h.ajax({url:Ajx,type:"post",data:{id:a,url:h("#doolinkeditor_url").val(),lang:h("#doolinkeditor_lang").val(),type:h("#doolinkeditor_type").val(),quality:h("#doolinkeditor_quality").val(),size:h("#doolinkeditor_size").val(),action:"doosaveformeditor_links"},error:function(a){console.log(a)},success:function(e){h("#link-"+a).addClass("fadein"),h("#link-"+a).html(e),h(".doo_link_editor").remove()}}),!1})},a.UpdateOptions=function(){Doc.on("click",".dooplay_update_database",function(){return h("#cfg_dts").html(dooAj.updb),h.ajax({url:Ajx,type:"post",data:{action:"update_dbdooplay"},error:function(a){console.log(a)},success:function(){location.reload()}}),!1})},a.UpdateDatabase=function(){Doc.on("submit","#doolinkmod_form",function(){var a=h(this);return h("#doolinkmod_submit").prop("disabled",!0),h.ajax({url:Ajx,type:"post",dataType:"json",data:a.serialize(),error:function(a){console.log(a)},success:function(a){if(h("#doolinkmod_submit").prop("disabled",!1),h("#doolinkmod > .response").show(),h(".doo-progress > div").animate({width:a.percentage+"%"},150,function(){}),a.step){var e=parseFloat(a.step)+parseFloat(1);h("#doolinkmod_step").val(e),h("#doolinkmod_submit").trigger("click")}else a.next?(h("#doolinkmod_run").val(a.next),h("#doolinkmod_submit").trigger("click")):(h("#doolinkmod_form").remove(),h("#doolinkmod").removeClass("required"),h("#doolinkmod > .response").html("<div class=\"notice fadein\">"+dooAj.completed+"</div>"))}}),!1})},a.DatabaseTool=function(){Doc.on("click",".doodatabasetool",function(){var a=h(this),e=a.data("run"),f=h("#doolinkmod_nonce").val(),g=confirm(dooAj.confirmdbtool);return g&&(h(a).addClass("disabled"),h("#doodatabasetool_"+e).html(dooAj.loading),h.ajax({url:Ajx,type:"post",dataType:"json",data:{run:e,noc:f,action:"dooplaydbtool"},error:function(a){console.log(a)},success:function(f){h(a).removeClass("disabled"),!0==f.response&&(h("#doodatabasetool_"+e).html(f.message),!0==f.remove&&h("#doobox_"+e).remove())}})),!1})}}(jQuery)